import"../chunks/DsnmJJEf.js";import"../chunks/BFNGBcc7.js";import{o as X}from"../chunks/CJgI0qws.js";import{bd as te,ba as se,u as re,r as ie,h as oe,a2 as q,be as ne,p as V,Q as le,R as ce,y as T,o as s,a as D,O as m,V as b,bf as ve,P as _,M as f,U as I,bg as B,W as de,aE as ue,e as fe,$ as me}from"../chunks/9-_W6_Jj.js";import{d as S,f as w,i as pe,h as he,s as ge,b as $,c as K}from"../chunks/DMh7ZjmC.js";import{h as be}from"../chunks/D50xvMqx.js";import{b as ee}from"../chunks/Cnjqa8SA.js";import{i as F}from"../chunks/Cjo9otzO.js";import{g as Q}from"../chunks/B-gExwhp.js";import{p as E,e as y,s as ye}from"../chunks/Cv-eKTXv.js";import{e as ke,h as _e,i as Se,o as xe,d as Ce,g as Ie,A as G,a as N}from"../chunks/ha-UOQYi.js";import{s as we}from"../chunks/Su-FUoRt.js";import{p as Pe}from"../chunks/CdEA5IGF.js";import{G as Ae,a as qe,g as W}from"../chunks/QimkSIxU.js";import{s as Y,e as Z,d as L}from"../chunks/C48CS4ZV.js";function Ee(e,r,n=r){var u=new WeakSet;te(e,"input",async t=>{var a=t?e.defaultValue:e.value;if(a=R(e)?H(a):a,n(a),q!==null&&u.add(q),await se(),a!==(a=r())){var i=e.selectionStart,v=e.selectionEnd,l=e.value.length;if(e.value=a??"",v!==null){var o=e.value.length;i===v&&v===l&&o>l?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=i,e.selectionEnd=Math.min(v,o))}}}),(oe&&e.defaultValue!==e.value||re(r)==null&&e.value)&&(n(R(e)?H(e.value):e.value),q!==null&&u.add(q)),ie(()=>{var t=r();if(e===document.activeElement){var a=ne??q;if(u.has(a))return}R(e)&&t===H(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function R(e){var r=e.type;return r==="number"||r==="range"}function H(e){return e===""?null:+e}var ze=w('<button class="suggestion-btn svelte-60fagq" type="button"> </button>'),Me=w('<div class="panel-inner svelte-60fagq"><div class="composer"><div class="composer-inner svelte-60fagq"><textarea class="composer-input svelte-60fagq" rows="1" placeholder="How can I help you today?"></textarea> <div class="composer-bottom svelte-60fagq"><div class="chips svelte-60fagq"></div> <button type="button" aria-label="Send"><svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 5v14m0-14l-6 6m6-6l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div></div></div>');function Oe(e,r){V(r,!1);const n=I();let u=E(r,"onSend",8,()=>{}),t=I(""),a=I(),i=I([]);X(()=>{b(i,_e(xe))});function v(){if(!s(a))return;B(a,s(a).style.height="auto");const d=parseFloat(getComputedStyle(s(a)).maxHeight||"9999");B(a,s(a).style.height=Math.min(s(a).scrollHeight,d)+"px")}function l(){const d=s(t).trim();d&&(u()(d),b(t,""),s(a)&&B(a,s(a).style.height="auto"))}function o(d){b(t,d),s(a)&&(s(a).focus(),v())}function p(){v()}le(()=>s(t),()=>{b(n,s(t).trim().length>0)}),ce(),F();var P=Me(),z=m(P),M=m(z),h=m(M);ve(h),ee(h,d=>b(a,d),()=>s(a));var x=_(h,2),k=m(x);ke(k,5,()=>s(i),Se,(d,U)=>{var c=ze(),g=m(c,!0);f(c),T(()=>ye(g,s(U))),y("click",c,()=>o(s(U))),S(d,c)}),f(k);var C=_(k,2);let O;f(x),f(M),f(z),f(P),T(()=>{O=we(C,1,"cta svelte-60fagq",null,O,{"is-active":s(n),"is-disabled":!s(n)}),C.disabled=!s(n)}),Ee(h,()=>s(t),d=>b(t,d)),y("input",h,p),y("click",C,l),S(e,P),D()}var Ue=w('<div class="panel-band svelte-12uf7hb"><div class="features-container svelte-12uf7hb"><div class="feature-card svelte-12uf7hb" id="analyze" role="button" tabindex="0"><img class="feature-image svelte-12uf7hb" id="analyzeImg" src="https://storage.googleapis.com/skinchat-core-dev-releases-asia-east1/0.5.1/br/dist/immutable/assets/analysis.ZSryxJbS.png" alt=""/> <div class="feature-card-texts svelte-12uf7hb"><span class="feature-title svelte-12uf7hb"><b>Analyze my skin</b> by taking a quick photo</span></div></div> <div class="feature-card svelte-12uf7hb" id="personalise" role="button" tabindex="0"><img class="feature-image svelte-12uf7hb" id="personaliseImg" src="https://storage.googleapis.com/skinchat-core-dev-releases-asia-east1/0.5.1/br/dist/immutable/assets/routine.CBHeyKkM.png" alt=""/> <div class="feature-card-texts svelte-12uf7hb"><span class="feature-title svelte-12uf7hb">Build my personalized <b>skincare routine</b></span></div></div></div></div>');function $e(e,r){V(r,!1);let n=E(r,"onAnalyze",8,()=>{}),u=E(r,"onPersonalise",8,()=>{});F();var t=Ue(),a=m(t),i=m(a),v=_(i,2);f(a),f(t),y("click",i,function(...l){n()?.apply(this,l)}),y("keydown",i,l=>l.key==="Enter"&&n()()),y("click",v,function(...l){u()?.apply(this,l)}),y("keydown",v,l=>l.key==="Enter"&&u()()),S(e,t),D()}var je=w('<img class="portrait-image svelte-1binqiv" alt="" referrerpolicy="no-referrer" style="display:block"/>'),Be=he('<svg id="portrait-plus" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),Ge=w('<a href="/skin-portrait" class="skin-portrait-pill svelte-1binqiv" aria-label="Skin Portrait"><span class="skin-portrait-plus svelte-1binqiv" aria-hidden="true"><!></span> <span class="skin-portrait-text svelte-1binqiv">Skin Portrait</span></a>');function Ne(e,r){let n=E(r,"portraitImageUrl",8,""),u=E(r,"onClick",8,()=>{});var t=Ge(),a=m(t),i=m(a);{var v=o=>{var p=je();T(()=>Ce(p,"src",n())),S(o,p)},l=o=>{var p=Be();S(o,p)};pe(i,o=>{n()?o(v):o(l,!1)})}f(a),de(2),f(t),y("click",t,Pe(function(...o){u()?.apply(this,o)})),S(e,t)}var Re=w('<main class="svelte-1uha8ag"><div class="hero-wrap svelte-1uha8ag"><h1 class="hero-title svelte-1uha8ag">SkinGPT</h1> <p class="hero-subtitle svelte-1uha8ag">Your AI skincare assistant</p></div> <div class="panel svelte-1uha8ag"><!> <!></div> <!></main> <!>',1);function ta(e,r){V(r,!1);const n=()=>K(Y,"$subjectId",t),u=()=>K(L,"$scansPaging",t),[t,a]=ge();let i=I(),v=I("");X(async()=>{try{const c=Ie(),g=await qe(G,c,N);$(Y,g.subjectId);const A=await W(G,g.subjectId,N,1,10),J=A?.items||[];$(Z,J),$(L,{...u(),hasNext:A?.page?.hasNext,pageNo:2});for(const ae of J){const j=ae?.report_data?.input?.image;if(typeof j=="string"&&j.trim()){b(v,j);break}}}catch(c){console.error("Init failed:",c)}});function l(c){s(i)?.showCopilot().then(()=>{window.copilot?.("event","sendUserMessage",{value:c})})}function o(){s(i)?.showGlamARSdk()}async function p(){await s(i)?.showCopilot(),window.copilot?.("event","sendUserMessage",{value:"Build my personalized skincare routine"})}function P(){Q("/skin-portrait")}function z(c){n()&&W(G,n(),N,1,10).then(g=>{$(Z,g?.items||[])})}function M(c,g){const A=document.getElementById("copilotContainer");A&&(A.style.display="none"),typeof sessionStorage<"u"&&sessionStorage.setItem("concernData",JSON.stringify({concerns:c,selectedName:g})),Q("/concern")}F();var h=Re();be("1uha8ag",c=>{fe(()=>{me.title="SkinGPT | GlamAR"})});var x=ue(h),k=_(m(x),2),C=m(k);Oe(C,{onSend:l});var O=_(C,2);$e(O,{onAnalyze:o,onPersonalise:p}),f(k);var d=_(k,2);Ne(d,{get portraitImageUrl(){return s(v)},onClick:P}),f(x);var U=_(x,2);ee(Ae(U,{onScanComplete:z,onConcernOpen:M,$$legacy:!0}),c=>b(i,c),()=>s(i)),S(e,h),D(),a()}export{ta as component};
